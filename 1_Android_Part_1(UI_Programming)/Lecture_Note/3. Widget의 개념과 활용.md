# 3. Widget의 개념과 활용

## Widget의 기본개념

### Widget 이란

-   View 중에서 기능을 갖고 사용자와 상호작용하는 모든 것들 = widget
-   Layout위에 배치되어 화면에 나타나고 코드를 통해 Widget 통제하여 사용자와 소통

<br>

### Widget 사용 패턴

1.  Layout에 사용하고자 하는 Widget 배치
2.  Activity가 실행되면 화면이 구성되고 화면에 배치된 모든 View들이 객체로 생성
3.  객체로 생성된 View 중에 필요한 Widget의 주소 값을 얻어와 코드로 이를 통제
4.  이벤트에 대한 코드 구성하여 사용

<br>

### View 객체의 주소 값 가져오기

```kotlin
val text1 = findViewById<TextView>(R.id.textView)
```

-   자바는 개발자가 View 객체의 주소 값을 직접 얻어와야함

-   코틀린은 ID와 같은 이름의 변수가 자동으로 선언되고 View의 주소값도 담김
    이를 위해 아래 방식

    >   `build.grandle(Module: ~~~)`에 아래 내용 추가 후, sync
    >
    >   ```
    >   plugins {
    >       id 'com.android.application'
    >       id 'kotlin-android'
    >       id 'kotlin-android-extensions'
    >   }
    >   ```

<br>

## TextView

>   Project Name : `3_1_TextView`

### TextView 특징

-   사용자에게 전달하고자 하는 문자열을 표시하는 View (Widget)

<br>

### TextView 주요 속성

-   `text`: TextView를 통해 보여줄 문자열
-   `lines`: 표시하고자 하는 문자열의 라인 수 (나머지 짤림)
-   `textColor`: 표시되는 문자열의 색상
-   `textSize`: 표시되는 문자열의 크기
-   `textAppearance`: 표시되는 문자열의 형식 

<br>

### :computer: TextView  주요 프로퍼티

-   `text`: TextView를 통해 보여지는 문자열 관리

```kotlin
// 뷰의 주소 값을 얻기
val text1 = findViewById<TextView>(R.id.text1)
text1.text = "안녕하세용"
// kotlin-android-extensions가 있으면 주소값 가져올 필요 없음
text2.text = "반갑습니다"
```

<br>

### :computer: TextView  주요 메서드

-   `setBackgroundColor`: 배경색상 지정
-   `setTextColor`: 글자 색상을 지정
-   `append`: 문자열을 추가

![image-20201224000845613](img/3.%20Widget%EC%9D%98%20%EA%B0%9C%EB%85%90%EA%B3%BC%20%ED%99%9C%EC%9A%A9/image-20201224000845613.png)

```kotlin
text2.setBackgroundColor(Color.RED)
text1.setBackgroundColor(Color.rgb(100, 100, 100))

text2.setTextColor(Color.BLUE)
text2.append("\n감사합니다~~~~~")
```

<br>

## Button

>   Project Name : `3_2_Button`

### Button 특징

-   사용자가 클릭 시 개발자가 만든 코드 동작시켜주는 View
-   문자열을 가진 Button과 이미지를 가진 ImageButton 이 있음



### Button 주요속성

-   `text`: Button의 문자열 설정
-   `srcCompat`: ImageButton의 이미지 설정



<br>

### :star: Button 이벤트

-   `onClick`: 사용자가 Button을 Click하면 발생하는 이벤트

![image-20201224003209146](img/3.%20Widget%EC%9D%98%20%EA%B0%9C%EB%85%90%EA%B3%BC%20%ED%99%9C%EC%9A%A9/image-20201224003209146.png)

```kotlin
override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)
    setContentView(R.layout.activity_main)

    // 버튼에 리스너를 설정
    button2.setOnClickListener(listener3)
    button3.setOnClickListener(listener3)
}

val listener3 = object : View.OnClickListener {
    override fun onClick(v: View?) {
        when(v?.id){
            R.id.button2 -> {
                text1.text = "두번째 버튼을 눌렀습니다"
            }
            R.id.button3 -> {
                text1.text = "세번째 버튼을 눌렀습니다."
            }
        }
    }
}
```

#### 코틀린은 고차함수를 제공함

```kotlin
button4.setOnClickListener { 
    text1.text = "다섯번째 버튼을 눌렀습니다"
}
// 버튼마다 다른 기능 사용시 -> 고차 함수
// 버튼이 동일 기능 혹은 분기 사용시 -> listener 함수
```

<br>

## EditText

>   Project Name : `3_3_EditText`

![image-20201224004808800](img/3.%20Widget%EC%9D%98%20%EA%B0%9C%EB%85%90%EA%B3%BC%20%ED%99%9C%EC%9A%A9/image-20201224004808800.png)

### EditText 주요속성

-   `text`: EditText에 표시할 문자열 설정 (처음 초기값)
-   `hint`: EditText에 아무것도 없을 때 표시할 안내 문구
-   `inputType`: 입력 값에 대해 설정. 표시 형식, 나타나는 키보드 등 영향 (password, date 등)
-   `imeOptions`: 나타나는 키보드의 Enter 키 모양 설정 (기능 변화 없음)



### :computer: EditText 프로퍼티

-   `text`: 사용자가 입력한 문자열 값

![editText](img/3.%20Widget%EC%9D%98%20%EA%B0%9C%EB%85%90%EA%B3%BC%20%ED%99%9C%EC%9A%A9/editText.png)

```kotlin
button1.setOnClickListener {
    textView1.text = editText1.text
    // 안드로이드에서 사용되는 기능 사용할때
    val imm = getSystemService(Context.INPUT_METHOD_SERVICE) as InputMethodManager
    // 키보드 창 닫히게 하기
    imm.hideSoftInputFromWindow(editText1.windowToken, 0)
    // 포커스 없애주기
    editText1.clearFocus()
}
```

<br>

### :star:  EditText 이벤트

-   `TextWatcher`: 사용자가 입력한 내용 실시간 감시 ~고차함수~ ~X~

    <img src="img/3.%20Widget%EC%9D%98%20%EA%B0%9C%EB%85%90%EA%B3%BC%20%ED%99%9C%EC%9A%A9/editText%20(1)-1608740577708.png" alt="editText (1)" style="zoom:80%;" />

    ```kotlin
    	editText1.addTextChangedListener(listener1)
    }
    
    val listener1 = object : TextWatcher{
        // 문자열 변경 전
        override fun beforeTextChanged(s: CharSequence?, start: Int, count: Int, after: Int) {
            textView1.text = "before : $s"
        }
        // 문자열 변경 작업이 완료되었을 때
        override fun onTextChanged(s: CharSequence?, start: Int, count: Int, after: Int) {
            textView2.text = "changed : $s"
        }
        // 변경된 문자열이 화면에 반영되었을 때 (주로 많이 씀)
        override fun afterTextChanged(s: Editable?) {
            textView3.text = "after : $s"
        }
    }
    ```

-   `EditorAction`: 키보드의 Enter 키를 눌렀을 때 발생하는 이벤트

    <img src="img/3.%20Widget%EC%9D%98%20%EA%B0%9C%EB%85%90%EA%B3%BC%20%ED%99%9C%EC%9A%A9/editText%20(2).png" alt="editText (2)" style="zoom:80%;" />

    ```kotlin
    editText1.setOnEditorActionListener { v, actionId, event ->
        textView1.text = "엔터 버튼을 눌렀습니다"
        textView2.text = editText1.text
                                         
        // true 반환: 처리만 되고 키보드 유지
        // false 반환: 처리 후 키보드 내려감
        false
    }
    ```

<br>

## TextInputLayout

>   Project Name : `3_4_TextInputLayout`

### TextInputLayout 특징

-   EditText를 보완한 View
-   EditText의 모든 것에 몇 가지 요소가 추가됨

<br>

### TextInputLayout 주요속성 

-   `hint`: 입력한 내용이 없으면 보여줄 안내 메세지. EditText와 다르게 입력시 상단으로 올라감
-   `counterEnabled`: 입력한 글자의 수 표시
-   `counterMaxLength`: 지정한 글자 수 넘기면 붉은색으로 표시

<br>

### :computer: TextInputLayout 주요 프로퍼티

-   `editText`: TextInputLayout 이 가지고 있는 EditText 객체의 주소 값

-   `error`: 오류로 표시할 메시지 설정

    ![textInputLayout (1)](img/3.%20Widget%EC%9D%98%20%EA%B0%9C%EB%85%90%EA%B3%BC%20%ED%99%9C%EC%9A%A9/textInputLayout%20(1).png)

    ```kotlin
    	textInputLayout1.editText?.addTextChangedListener(listner1)
    }
    val listner1 = object: TextWatcher {
        override fun beforeTextChanged(s: CharSequence?, p1: Int, p2: Int, p3: Int) {}
        override fun onTextChanged(p0: CharSequence?, p1: Int, p2: Int, p3: Int) {}
        override fun afterTextChanged(s: Editable?) {
            if(s != null) {
                if (s.length > 10){
                    textInputLayout1.error = "10글자 이하로 입력해주세요"
                } else {
                    textInputLayout1.error = null
                }
            }
        }
    }
    ```

<br>

## ImageView

>   Project Name : `3_5_ImageView`

### ImageView 특징

-   이미지를 사용자에게 보여주고자 하는 목적
-   `res`폴더에 들어가는 파일은 모두 소문자

<br>

### ImageView 주요속성

-   `srcCompat`: 보여줄 이미지 지정 (벡터  이미지도 처리 가능)

<br>

### :computer: ImageView 주요메서드

-   `setImageResource(IMAGE)`: `res` 폴더에 있는 이미지 설정 (로컬)

-   `setImageBitmap()`: Bitmap 객체로 만들어진 이미지 설정 (수정불가 + 네트워크, 카메라)

-   `setImageDrwable()`: Drawable 객체로 만들어진 이미지 설정 (수정가능 + 네트워크, 카메라)

    ```kotlin
    // 이미지 변경
    imageView3.setImageResource(R.drawable.ic_launcher_background)
    ```

<br>

### Drawable vs Mipmap

|        | Drawable        | Mipmap               |
| ------ | --------------- | -------------------- |
| 이미지 | 리소스용 이미지 | 런처 아이콘용 이미지 |
| 방식   | 비트맵          | 벡터                 |

<br>

## ToggleButton

>   Project Name : `3_6_ToggleButton`

### ToggleButton 특징

-   애플리케이션의 기능 On/Off 제공시 사용
-   더 보기 좋은 View들이 생겨 잘 사용하지 않음

<br>

### ToggleButton 주요 속성

-   `textOn`: On 상태일 때 표시할 문자열
-   `textOff`: Off 상태일 때 표시할 문자열
-   `checked`: 초기 상태 (true면 ON)

<br>

### :computer: ToggleButton 주요 프로퍼티

-   `isChecked`: On이면 true, Off면 false

    ![ToggleButton (1)](img/3.%20Widget%EC%9D%98%20%EA%B0%9C%EB%85%90%EA%B3%BC%20%ED%99%9C%EC%9A%A9/ToggleButton%20(1).png)

    ```kotlin
    button.setOnClickListener {
        if(toggleButton.isChecked){
            textView.text = "On 상태 다용"
        } else{
            textView.text = "Off 상태 다용"
        }
    }
    button2.setOnClickListener {
        toggleButton.isChecked = true
    }
    button3.setOnClickListener {
        toggleButton.isChecked = false
    }
    ```

<br>

### :computer: ToggleButton 주요 메서드

-   `toggle()`: On/Off 상태를 바꿈

    ![ToggleButton (2)](img/3.%20Widget%EC%9D%98%20%EA%B0%9C%EB%85%90%EA%B3%BC%20%ED%99%9C%EC%9A%A9/ToggleButton%20(2).png)

    ```kotlin
    button4.setOnClickListener { 
    	toggleButton.toggle()
    }
    ```

<br>

### :star: ToggleButton 주요 이벤트

-   `click`: toggle 버튼을 클릭하면 발생하는 이벤트

    ```kotlin
    	toggleButton.setOnClickListener(listener)
        toggleButton2.setOnClickListener {
            if(toggleButton2.isChecked) textView2.text = "On 상태 다용"
            else textView2.text = "Off 상태 다용"
        }
    }
    
    val listener = object: View.OnClickListener {
        override fun onClick(v: View?) {
            if(toggleButton.isChecked) textView.text = "On 상태 다용"
            else textView.text = "Off 상태 다용"
        }
    }
    ```

<br>

## CheckBox

>   Project Name : `3_7_CheckBox`

### CheckBox 특징

-   체크를 통해 선택할 수 있는 View
-   다수의 CheckBox를 동시 선택 가능 (독립적)

<br>

### CheckBox 주요 속성

-   `text`: CheckBox에 표시되는 문자열 설정
-   `checked`: 체크 상태를 설정



### :computer: CheckBox 주요 프로퍼티

-   `isChecked`: 체크 박스의 현재 체크 값

    <img src="img/3.%20Widget%EC%9D%98%20%EA%B0%9C%EB%85%90%EA%B3%BC%20%ED%99%9C%EC%9A%A9/checkBox%20(1).png" alt="checkBox (1)" style="zoom:67%;" />

    ```kotlin
    button.setOnClickListener {
        textView.text = ""
        if (checkBox.isChecked) textView.append("첫 번째 체크 박스가 체크되어 있습니다.\n")
        else textView.append("첫 번째 체크 박스가 해제되어 있습니다.\n")
        if (checkBox2.isChecked) textView.append("두 번째 체크 박스가 체크되어 있습니다.\n")
        else textView.append("두 번째 체크 박스가 해제되어 있습니다.\n")
        if (checkBox3.isChecked) textView.append("세 번째 체크 박스가 체크되어 있습니다.\n")
        else textView.append("세 번째 체크 박스가 해제되어 있습니다.\n")
    }
    ```

<br>

### :computer: CheckBox 주요 메서드

-   `toggle()`:  현재 상태를 반전 시킴

    ```kotlin
    button4.setOnClickListener {
                checkBox.toggle()
                checkBox2.toggle()
                checkBox3.toggle()
            }
    ```

<br>

### :star: CheckBox 주요 이벤트

-   `checkedChange`: 체크 상태가 변경되는 사건 (중첩, 고차 함수)

<br>

## RadioButton

> Project Name : `3_8_RadioButton`

### RadioButton 특징

-   하나의 그룹안에서 하나만 선택할 수 있도록 하는 View

<br>

### :computer: 

<br>

## Swtich

>   Project Name : `3_6_ToggleButton`

:computer: 

<br>

## CheckedTextView

>Project Name : `3_6_ToggleButton`

:computer: 

<br>

## Chop

>Project Name : `3_6_ToggleButton`

:computer: 

<br>

## ProgressBar

>Project Name : `3_6_ToggleButton`

:computer: 

<br>

## SeekBar

>Project Name : `3_6_ToggleButton`

:computer: 

<br>

## RatringBar

>Project Name : `3_6_ToggleButton`

:computer: 

<br>

## ScrollView

>Project Name : `3_6_ToggleButton`

:computer: 

<br>

## CardView

>Project Name : `3_6_ToggleButton`

:computer: 

<br>